<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="../../../WEB-INF/template-pagamento.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="conteudo-pagamento">
        <b:growl />

        <b:container style="background: #F8F8F8;" rendered="#{pedidoController.carrinho.vazio == true}">
            <b:row>
                <h:form>
                    <b:column col-md="4" style="border: 0px solid black;text-align: left;">
                        <p:graphicImage value="../../../resources/img/e-commerce.png" width="180" height="150"/>
                    </b:column>

                    <b:column col-md="8" style="border: 0px solid black;text-align: left;">
                        <p>Sua sacola está vazia</p>
                        <p>
                            Vá para a <b:commandLink value="página inicial" action="#{produtoController.visualisarProdutos()}"/> 
                            ou procure no site os produtos que vão te deixar feliz.
                            Quando encontrá-los, clique no botão adicionar à cesta ;)
                        </p>
                    </b:column>
                </h:form>
            </b:row>
        </b:container>

        <br></br>

        <b:container style="background: white;" rendered="#{pedidoController.carrinho.vazio != true}">
            <h:form>
                <b:row>
                    <b:column col-md="6" style="border: 0px solid black;text-align: left;">
                        <p><b>Resumo do pedido</b></p>
                        <p:repeat value="#{pedidoController.carrinho.pedidoItems}" var="g">
                            <b:panelGrid columns="2">
                                <h:outputText value="Produto " style="font-weight: bold;"/>
                                <h:outputText value="#{g.produto.titulo}" />
                                <h:outputText value="Valor unit. " style="font-weight: bold;"/>
                                <h:outputText value="#{g.produto.preco}" >
                                    <f:convertNumber type="currency" currencySymbol="R$ " />
                                </h:outputText>
                                <h:outputText value="Quant. " style="font-weight: bold;"/>
                                <p:inputText value="#{g.quantidade}" size="5"/>
                            </b:panelGrid>
                            <hr/>
                        </p:repeat>

                        <b:panelGrid columns="2">
                            <h:outputText value="Total: " style="font-weight: bold;color: red;"/>
                            <h:outputText value="#{pedidoController.carrinho.valorSubtotal}" 
                                          style="font-weight: bold;color: green;">
                                <f:convertNumber type="currency" currencySymbol="R$ " />
                            </h:outputText>
                        </b:panelGrid>
                    </b:column>

                    <b:column col-md="6" style="border: 0px solid black;text-align: left;">
                        <p><b>Endereço de entrega</b></p>
                        <b:panelGrid columns="1">
                            <h:outputText value="#{seguranca.usuarioLogado.usuario.pessoa.nome}" />
                        </b:panelGrid>

                        <b:panelGrid columns="1">
                            <h:outputText value="#{seguranca.usuarioLogado.usuario.pessoa.endereco.descricao}" />
                        </b:panelGrid>

                        <b:panelGrid columns="1">
                            <h:outputText value="Alterar endereço de entrega" />
                        </b:panelGrid>
                    </b:column>
                </b:row>

                <b:row>
                    <b:column col-md="12" style="border: 0px solid black;text-align: left;">
                        <b:panelGrid col-spans="12">
                            <p:outputLabel value="Formas de pagamento" for="formaPagamento" />
                            <p:selectOneButton id="formaPagamento" required="true" requiredMessage="Informe a forma de pagamento"
                                               value="#{pedidoController.carrinho.formaPagamento}">
                                <f:selectItems value="#{pedidoController.formasPagamento}"
                                               var="formaPagamento" itemValue="#{formaPagamento}"
                                               itemLabel="#{formaPagamento.descricao}" />
                            </p:selectOneButton>
                        </b:panelGrid>
                    </b:column>
                </b:row>

                <br></br>

                <b:row>
                    <b:column col-md="6" style="border: 0px solid black;text-align: left;">
                        <b:panelGrid col-spans="12">
                            <b:commandButton value="continuar comprando" action="#{produtoController.visualisarProdutos()}" 
                                             immediate="true" look="danger" icon-awesome="fa-suitcase" style="width:100%"/>
                        </b:panelGrid>
                    </b:column>
                    <b:column col-md="6" style="border: 0px solid black;text-align: right;">
                        <b:panelGrid col-spans="12">
                            <b:commandButton value="confirmar a compra" action="#{pedidoController.confirmarCompra()}" 
                                             look="success" icon-awesome="fa-cc" style="width:100%"/>
                        </b:panelGrid>
                    </b:column>
                </b:row>
            </h:form>
        </b:container>

    </ui:define>
</ui:composition>